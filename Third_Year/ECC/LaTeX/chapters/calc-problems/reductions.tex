\section{Riduzioni di classi di problemi}

Nella dimostrazione del \Cref{th:K_0-not-R} abbiamo sfruttato una tecnica comune in matematica: abbiamo \emph{ridotto} il problema $K_0$ al problema $K$ e in questo modo abbiamo dimostrato che $K_0$ non può essere decidibile.

Vogliamo ora generalizzare questo concetto.

\begin{definition}
    [Riduzione secondo una funzione]
    Dati due problemi $A$, $B$, si dice che $A$ \sstrong{si riduce secondo $f$} a $B$ (e si scrive $A \leq_f B$) se \[
        x \in A \;\iff\; f(x) \in B.
    \] 
\end{definition}

\begin{remark}
    $K \leq_f K_0$ secondo la funzione $f : \N \to \N^2$ definita da $f(x) \deq (x, x)$.   
\end{remark}

\begin{remark}
    $A \leq_f B$ se e solo se $\compl{A} \leq_f \compl{B}$.  
\end{remark}

Spesso non ci interessa quale sia la funzione che permette la riduzione di $A$ a $B$, ma solo a quale classe di funzioni appartiene.

\begin{definition}
    [Riduzione secondo una classe di funzioni]
    Siano $A$, $B$ problemi, $\FF$ insieme di funzioni. Allora si dice che $A$ \sstrong{si riduce secondo $\FF$} a $B$ (e si scrive $A \leq_{\FF} B$, o anche $A \leq B$ se l'insieme $\FF$ è deducibile dal contesto) se esiste una $f \in \FF$ tale che $A \leq_f B$.   
\end{definition}

Come scegliamo l'insieme $\FF$? In generale dipende dalle classi di problemi che vogliamo confrontare: infatti per poter studiare queste classi è importante che la riduzione rispetti alcune proprietà.

\begin{definition}
    [Riduzione che classifica due classi][red-classifies]
    Date $\DD, \EE$ classi di problemi con $\DD \subseteq \EE$, $\FF$ insieme di funzioni, si dice che la relazione $\leq_{\FF}$ \sstrong{classifica} le classi $\DD$, $\EE$ se \begin{enumerate}
        \item $A \leq_{\FF} A$,
        \item se $A \leq_{\FF} B$ e $B \leq_{\FF} C$, allora $A \leq_{\FF} C$,
        \item se $A \leq_{\FF} B$ e $B \in \DD$, allora $A \in \DD$,
        \item se $A \leq_{\FF} B$ e $B \in \EE$, allora $A \in \EE$.       
    \end{enumerate}   
\end{definition}

\begin{remark}
    Sfruttando la definizione di riduzione, possiamo riscrivere le proprietà in forma \emph{algebrica}:
    \begin{enumerate}
        \item $\id_A \in \FF$,
        \item se $f$ e $g$ appartengono a $\FF$, allora anche la composizione $gf$ appartiene ad $\FF$,
        \item se $f \in \FF$ e $B \in \DD$, allora $f\inv[B] \in \DD$,
        \item se $f \in \FF$ e $B \in \EE$, allora $f\inv[B] \in \EE$.            
    \end{enumerate}
    Questo in particolare mi dice che se $\leq_{\FF}$ classifica $\DD, \EE$, allora $\leq_{\FF}$ è un \strong{preordine} su $\DD$ e su $\EE$.
\end{remark}

\newthought{Intuizione} Qual è il significato intuitivo di una relazione che classifica due classi? Possiamo leggere $\leq_{\FF}$ come "è al più difficile quanto":
\begin{itemize}
    \item $A$ è al più difficile quanto se stesso,
    \item se $A$ è al più difficile quanto $B$ e $B$ è al più difficile quanto $C$, allora $A$ è al più difficile quanto $C$,
    \item i problemi difficili al più quanto $B$ si trovano tutti nel più piccolo insieme contenente $B$: se $A$ è al più difficile quanto $B$ e $B$ appartiene a $\DD$ (risp. $\EE$), allora anche $A$ appartiene a $\DD$ (risp. $\EE$), cioè $A$ \strong{non sta fuori $\DD$ (risp. $\EE$)}.    
\end{itemize} 

Fissiamo ora due classi $\DD$, $\EE$ con $\DD \subseteq \EE$ e una classe di funzioni $\FF$.    

\begin{definition}
    [Grado di un problema]
    Definiamo il \sstrong{grado} di un problema $A$ è \[
        \deg A \deq \set*{B \given A \leq_{\FF} B \text{ e } B \leq_{\FF} A},
    \] ovvero è l'insieme di tutti i problemi con la stessa difficoltà di $A$. 
\end{definition}

\begin{definition}
    [Problemi ardui e completi]
    Sia $H$ un problema. \begin{itemize}
        \item $H$ si dice \sstrong{$\leq_{\FF}$-arduo per $\EE$} se per ogni $A \in \EE$ si ha $A \leq_{\FF} H$, ovvero se $H$ è almeno difficile quanto tutti i problemi di $\EE$.
        \item $H$ si dice \sstrong{$\leq_{\FF}$-completo per $\EE$} se è $\leq_{\FF}$-arduo per $\EE$ e $H \in \EE$.    
    \end{itemize} 
\end{definition}

In particolare possiamo studiare la relazioni tra $\DD$ e $\EE$ tramite i problemi $\leq_{\FF}$-ardui/completi per $\EE$.

\begin{proposition}
    Se $C$ è $\leq_{\FF}$-completo per $\EE$ e $C \in \DD$, allora $\EE = \DD$.    
\end{proposition}
\begin{proof}
    Dato che $\DD \subseteq \EE$, basta mostrare che $\EE \subseteq \DD$. Sia allora $B \in \EE$: dato che $C$ è $\leq_{\FF}$-completo per $\EE$ segue che $B \leq_{\FF} C$. Ma $C \in \DD$, dunque anche $B \in \DD$.      
\end{proof}

\begin{proposition}[ ][A-hard=>B-hard]
    Se $A$ è $\leq_{\FF}$-arduo per $\EE$ e $A \leq_{\FF} B$, allora $B$ è $\leq_{\FF}$-arduo per $\EE$. In particolare se $B \in \E$ allora $A$, $B$ sono $\leq_{\FF}$-completi per $\EE$.          
\end{proposition}
\begin{proof}
    Se $H \in \EE$. Dato che $A$ è $\leq_{\FF}$-arduo per $\EE$ si ha $H \leq_{\FF} A$; inoltre $A \leq_{\FF} B$ dunque per transitività $H \leq_{\FF} B$, ovvero $B$ è $\leq_{\FF}$-arduo.
    
    Inoltre se $B \in \EE$ segue anche che $A$ lo è, poiché $A \leq_{\FF} B$. Allora per definizione $A, B$ sono $\leq_{\FF}$-completi per $\EE$.
\end{proof}